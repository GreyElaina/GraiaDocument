---
id: template-readme
title: æ¶ˆæ¯æ¨¡æ¿(Template)
sidebar-title: Template
---

:::note
æ­¤ç¯‡æ–‡ç« æ˜¯ä»ä¹‹å‰çš„æ–‡æ¡£å¤„è¿ç§»è¿‡æ¥çš„, å¤§å¤šæ•°åŠŸèƒ½è¿˜èƒ½ç”¨...å§.

ç°åœ¨ä½ åœ¨ `MessageChain.create` é‡Œä½¿ç”¨ `*` è§£åŒ…ç¬¦ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ, ä¸è¿‡æ¯”è¾ƒä¸‘;
è¿™ä¸ªåŒ…åº”è¯¥æ˜¯å…¼å®¹çš„, å¦‚æœä¸å…¼å®¹, è¯·ç›´æ¥åœ¨ `Application` çš„ issue é‡Œæ, ä¸ç„¶æˆ‘çœ‹ä¸åˆ°.
:::

æœ‰æ—¶å€™, å¯¹éå¸¸éå¸¸éå¸¸é•¿çš„æ¶ˆæ¯é“¾çš„æ’ç‰ˆå’Œè°ƒæ•´å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°åŒçƒ¦,
æ‰€ä»¥æˆ‘ä»¬æä¾›äº† æ¨¡æ¿(Template) æœºåˆ¶æ¥å¸®åŠ©å¼€å‘è€…ç”Ÿæˆè§„èŒƒçš„æ¶ˆæ¯é“¾.

## å®‰è£…
æ¨¡æ¿æœºåˆ¶å¹¶ä¸å†…ç½®äº Graia Application for Mirai ä¸­,
æ‰€ä»¥ä½ éœ€è¦é€šè¿‡ä½ çš„åŒ…ç®¡ç†å™¨è·å–:

``` bash
pip install graia-template
# ä½¿ç”¨ poetry
poetry add graia-template
```

## ä½¿ç”¨
å½“ä½ é¡ºåˆ©å®‰è£…äº†åº“å, ä½ å°±å¯ä»¥å¯¼å…¥å¹¶ä½¿ç”¨äº†:

``` python
from graia.template import Template
```

ä½ å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹å¼ä½¿ç”¨æ¨¡æ¿:

``` python
Template("Hello, $target!").render(
    target=At(member.id)
)
```

æˆ‘ä»¬é€šè¿‡ `$` åœ¨æ¨¡æ¿å­—ç¬¦ä¸²å†…å®šä¹‰ä¸€ä¸ªæ¨¡æ¿å—, å¹¶é€šè¿‡æ¨¡æ¿å—å®šä½, ç”Ÿæˆå‡ºæœ€åçš„æ¶ˆæ¯é“¾.

ä»¥ä¸‹æ¨¡æ¿å—æ˜¯å¯ä»¥æ¥å—çš„:
```
$target
$t1
$t2
$0
$01
$02
$83123132
```

ä»¥ä¸‹æ¨¡æ¿å—æ— æ•ˆ:
```
$1aff
$-232
$<234w>
$æˆ‘ä¸æ˜¯æ¨¡æ¿å—
$ã®
$ğŸ˜ˆ
```

:::tip

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç åˆ¤æ–­ä½ çš„æ¨¡æ¿å—æ˜¯å¦æœ‰æ•ˆ:

``` python
import regex
regex.match(r"^(?|(\$[a-zA-Z_][a-zA-Z0-9_]*)|(\$[0-9]*))$", "$æˆ‘ä¸æ˜¯æ¨¡æ¿å—")
```

:::

è·å¾— `Template` å®ä¾‹å, æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ `Template.render` æ–¹æ³•ç”Ÿæˆæ¶ˆæ¯é“¾äº†.

:::warning
ç”Ÿæˆçš„æ¶ˆæ¯é“¾**ä¸ä¸€å®š**æ˜¯å¯ä»¥è¢«å®‰å…¨å‘é€çš„.  
é€šè¿‡ `MessageChain.isSendable` æ–¹æ³•å¯ä»¥æ£€æŸ¥æ¶ˆæ¯é“¾æ˜¯å¦å¯ä»¥è¢«å®‰å…¨å‘é€.
:::

``` python
Template(f"Hello, $target! åœ¨ä½ çš„ GitHub, ä»Šå¤©å…±æ”¶è·äº† {star_increase} ä¸ª star, Congratulations!").render(
    target=At(member.id)
)
```

`Template.render` åªæ¥å— `Union[InternalElement, ExternalElement]`,
å¹¶ä¸”æˆ‘ä»¬ä½¿ç”¨äº† `pydantic.validate_arguments` å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œæ£€æŸ¥,
æ‰€ä»¥ä½ å¾—å°å¿ƒç‚¹ä½¿ç”¨è¿™ä¸ªæ–¹æ³•.

:::note
è¿™é‡Œæœ‰å¯èƒ½å‡ºç°é—®é¢˜...å¦‚æœå¯ä»¥å°±åœ¨ `Application` çš„ issue é‡Œé¢æ, å…¶ä»–çš„ä»“åº“æˆ‘ä¸ç»å¸¸çœ‹.
:::
